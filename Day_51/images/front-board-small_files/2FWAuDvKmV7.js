/*!CK:3851858852!*//*1438092888,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WlVEd"]); }

__d("Crashalyzer",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g=5*1000,h=10*60*1000,i={ACTIVE:'ACTIVE',CLOSED:'CLOSED'};function j(){try{var n=window.localStorage;if(n){var o='__test'+Date.now();n.setItem(o,'');n.removeItem(o);}return n;}catch(m){}}var k=j();function l(m){this.$Crashalyzer0='Crashalyzer:'+m;this.$Crashalyzer1={};this.$Crashalyzer2={};this.sessionID=null;this.sessionStartTime=null;this.storage=k;}l.prototype.getCrashTimeData=function(){var m=(window.performance&&window.performance.memory)||{},n=this.sessionStartTime;return {duration:n?Date.now()-n:0,appTabs:Object.keys(this.$Crashalyzer3()).length,jsHeapSizeLimit:m.jsHeapSizeLimit,totalJSHeapSize:m.totalJSHeapSize,usedJSHeapSize:m.usedJSHeapSize,elementsInDOM:document.getElementsByTagName('*').length,url:window.location.href};};l.prototype.getLogTimeData=function(){return {userAgent:window.navigator.userAgent};};l.prototype.logCrash=function(m,n,o){var p=Object.assign({sessionID:m},n,o);};l.prototype.logBrowserUnsupported=function(){};l.prototype.startSession=function(){if(!this.storage){this.logBrowserUnsupported();return;}if(this.$Crashalyzer4)return;if(!this.sessionID)this.sessionID=Math.random().toString(36).slice(2,9);if(!this.sessionStartTime)this.sessionStartTime=Date.now();this.$Crashalyzer5();this.$Crashalyzer4=setInterval(this.$Crashalyzer5.bind(this),g);};l.prototype.endSession=function(){if(!this.storage)return;if(!this.$Crashalyzer4)return;clearInterval(this.$Crashalyzer4);this.$Crashalyzer4=null;this.$Crashalyzer6({status:i.CLOSED});this.sessionID=null;this.sessionStartTime=null;};l.prototype.$Crashalyzer5=function(){var m={status:i.ACTIVE};Object.assign(m,this.getCrashTimeData());this.$Crashalyzer6(m);var n=this.$Crashalyzer3(),o={};Object.keys(n).forEach(function(p){var q=n[p];if(q.status===i.CLOSED)return;if(!q.lastUpdated)return;if(this.$Crashalyzer1[p])return;var r=Date.now()-q.lastUpdated;if(r>h){if(!this.$Crashalyzer2[p]){this.$Crashalyzer2[p]=true;o[p]=q;}else{this.logCrash(p,q,this.getLogTimeData());this.$Crashalyzer1[p]=true;}}else{o[p]=q;this.$Crashalyzer2[p]=null;}}.bind(this));this.storage.setItem(this.$Crashalyzer0,JSON.stringify(o));};l.prototype.$Crashalyzer3=function(){var m=this.storage.getItem(this.$Crashalyzer0)||'{}';try{m=JSON.parse(m);}catch(n){m={};this.storage.removeItem(this.$Crashalyzer0);}return m;};l.prototype.$Crashalyzer6=function(m){var n=this.$Crashalyzer3();if(!n[this.sessionID])n[this.sessionID]={};m.lastUpdated=Date.now();Object.keys(m).forEach(function(o){n[this.sessionID][o]=m[o];}.bind(this));this.storage.setItem(this.$Crashalyzer0,JSON.stringify(n));};e.exports=l;},null);
__d("CrashLogger-upstream",["BanzaiScuba","Crashalyzer","ScriptPath","SiteData","URI"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l='browser_crash';for(var m in h)if(h.hasOwnProperty(m))o[m]=h[m];var n=h===null?null:h.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=h;function o(){"use strict";if(h!==null)h.apply(this,arguments);}o.prototype.getCrashTimeData=function(){"use strict";var r=n.getCrashTimeData.call(this);Object.assign(r,{scriptPath:i.getScriptPath(),revision:j.revision,tier:j.tier,pushPhase:j.push_phase});return r;};o.prototype.logCrash=function(r,s){"use strict";var t=new g(l,null,{addBrowserFields:true,addGeoFields:true,addPredictedGeographyFields:true,addMobileDeviceFields:true}),u=new k(s.url);t.addNormal('session_id',r);t.addInteger('duration',s.duration);t.addInteger('last_updated',s.lastUpdated);t.addNormal('protocol',u.getProtocol());t.addNormal('domain',u.getDomain());t.addNormal('port',u.getPort());t.addNormal('path',u.getPath());t.addInteger('tabs',s.appTabs);t.addInteger('js_heap_size_limit',s.jsHeapSizeLimit);t.addInteger('total_js_heap_size',s.totalJSHeapSize);t.addInteger('used_js_heap_size',s.usedJSHeapSize);t.addInteger('elements_in_dom',s.elementsInDOM);t.addNormal('script_path',s.scriptPath);t.addNormal('revision',s.revision);t.addNormal('tier',s.tier);t.addNormal('push_phase',s.pushPhase);t.post();};var p,q={init:function(){if(!p){p=new o('web');if(typeof this.setEndSessionCallback!=='function')throw new Error('CrashLogger.setEndSessionCallback should be overridden by shim');p.startSession();this.setEndSessionCallback(p.endSession.bind(p));}}};e.exports=q;},null);
__d("PagePluginActionLogger",["BanzaiLogger","DOM","Event","PluginActions","PluginActionTypes"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={initializeClickLoggers:function(m,n,o,p,q,r,s,t){var u=function(v,w){try{var y=h.find(n,'.'+v);i.listen(y,'click',function(z){g.log('PagePluginActionsLoggerConfig',{page_id:m,page_plugin_action:w,page_plugin_action_type:k.CLICK});});}catch(x){}};u(o,j.PAGE_LIKE);u(p,j.PAGE_UNLIKE);u(q,j.PAGE_AVATAR);u(r,j.PAGE_PERMALINK);u(s,j.PAGE_SHARE);u(t,j.PAGE_CTA);}};e.exports=l;},null);